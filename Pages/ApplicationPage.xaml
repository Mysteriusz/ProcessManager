<Page x:Class="ProcessManager.Pages.ApplicationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="225" d:DesignWidth="800"
      Title="ApplicationPage" Background="#1a1a1a">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionaries/ButtonIconDictionary.xaml"/>
                <ResourceDictionary Source="Dictionaries/ColorDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <Thickness x:Key="ApplicationGridMargin" Left="5" Top="0" Right="5" Bottom="0" />

            <Style x:Key="ApplicationDataGridColumnHeader" TargetType="DataGridColumnHeader">
                <Style.Setters>
                    <Setter Property="Background" Value="{StaticResource DefaultColor}"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>

                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <Grid Height="22">
                                    <TextBlock Text="{Binding StringFormat=F2}" Foreground="#b0b0b0" Margin="{StaticResource ApplicationGridMargin}" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                    <Image Source="{StaticResource ArrowDownIcon}" Margin="{StaticResource ApplicationGridMargin}" Width="8" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                    <Border BorderBrush="{StaticResource DarkTextColor}" BorderThickness="0, 0, 1, 0"/>
                                </Grid>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style.Setters>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource MouseOverColor}" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ApplicationDataGridRow" TargetType="DataGridRow">
                <Style.Setters>
                    <Setter Property="Background" Value="{StaticResource DefaultColor}"/>
                    <EventSetter Event="MouseDoubleClick" Handler="ApplicationListRow_MouseDoubleClick"/>
                    <EventSetter Event="PreviewKeyUp" Handler="ApplicationListRow_PreviewKeyUp"/>
                </Style.Setters>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource MouseOverColor}"/>
                    </Trigger>

                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="{StaticResource SelectColor}" />
                    </Trigger>

                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True"/>
                            <Condition Property="IsSelected" Value="True"/>
                        </MultiTrigger.Conditions>
                        <Setter Property="Background" Value="{StaticResource MouseOverSelectColor}" />
                    </MultiTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ApplicationDataGridCell" TargetType="DataGridCell">
                <Style.Setters>
                    <Setter Property="BorderBrush" Value="Transparent"/>
                    <Setter Property="Foreground" Value="{StaticResource LightTextColor}"/>
                    <Setter Property="Margin" Value="2, 0, 0, 0"/>
                    <Setter Property="Height" Value="20"/>
                </Style.Setters>
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="Transparent" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ApplicationDataGridScrollBarThumb" TargetType="Thumb">
                <Style.Setters>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Grid>
                                    <Rectangle Fill="Transparent"/>
                                    <Rectangle Fill="{StaticResource DarkTextColor}" Margin="7" RadiusX="5" RadiusY="1.5" />
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style.Setters>
            </Style>

            <ControlTemplate x:Key="ApplicationDataGridScrollBar" TargetType="ScrollBar">
                <Track Margin="0, -20, 0, 0" IsDirectionReversed="True">
                    <Track.Thumb>
                        <Thumb Style="{StaticResource ApplicationDataGridScrollBarThumb}" DragDelta="Thumb_ScrollBarDragDelta" />
                    </Track.Thumb>
                </Track>
            </ControlTemplate>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <DataGrid 
            Name="ApplicationList"
            BorderBrush="#1a1a1a"
            Background="#1a1a1a"
            CellStyle="{StaticResource ApplicationDataGridCell}"
            RowStyle="{StaticResource ApplicationDataGridRow}"
            ColumnHeaderStyle="{StaticResource ApplicationDataGridColumnHeader}"
            GridLinesVisibility="None"
            AutoGenerateColumns="False"
            VerticalGridLinesBrush="#404040"
            VerticalScrollBarVisibility="Auto"
            HorizontalScrollBarVisibility="Disabled"
            HeadersVisibility="Column"
            SelectionUnit="FullRow"
            SelectionMode="Single"
            IsReadOnly="True"
            PreviewKeyDown="ApplicationList_PreviewKeyUp">

            <DataGrid.Resources>
                <Style TargetType="ScrollBar">
                    <Setter Property="Template" Value="{StaticResource ApplicationDataGridScrollBar}"/>
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*" />
                <DataGridTextColumn Header="Image Name" Binding="{Binding ImageName}" Width="*" />
                <DataGridTextColumn Header="User" Binding="{Binding User}" Width="*" />
                <DataGridTextColumn Header="Priority" Binding="{Binding Priority}" Width="*" />
                <DataGridTextColumn Header="CPU Usage" Binding="{Binding CpuUsage}" Width="*" />
                <!-- <DataGridTextColumn Header="Memory Usage" Binding="{Binding MemoryUsage}" Width="*" />
                <DataGridTextColumn Header="IO Usage" Binding="{Binding IOUsage}" Width="*" /> -->
                <DataGridTextColumn Header="PID" Binding="{Binding PID}" Width="*" />
            </DataGrid.Columns>
            <DataGrid.Items>
            </DataGrid.Items>
        </DataGrid>
    </Grid>
</Page>
